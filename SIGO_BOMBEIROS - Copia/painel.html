<!DOCTYPE html>
<html lang="pt-BR">

<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="titulo-aba-navegador">S.I.G.O. | Terminal T√°tico</title>
    <link rel="icon" id="favicon-global" href="https://cdn-icons-png.flaticon.com/512/2566/2566144.png"
        type="image/png">
    <link rel="stylesheet" href="css/style.css">
</head>


<body class="body-painel" onload="carregarDadosPainel()">
    <div id="tela-manutencao" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:radial-gradient(circle at center, #0f172a 0%, #05070a 100%); z-index:999999; display:flex; flex-direction:column; justify-content:center; align-items:center; color:#fff; text-align:center;">
        <img src="https://cdn-icons-png.flaticon.com/512/2566/2566144.png" style="width:120px; filter:grayscale(100%); margin-bottom:20px; opacity:0.8;">
        <h1 style="color:#ef4444; font-family:'JetBrains Mono',monospace; letter-spacing:3px; border-bottom:1px solid #ef4444; padding-bottom:10px;">[ REDE OFFLINE ]</h1>
        <p style="color:#94a3b8; max-width:500px; margin-top:20px; font-size:14px; line-height:1.6;">O Comando Geral determinou a suspens√£o tempor√°ria dos acessos √† rede S.I.G.O. para manuten√ß√£o estrat√©gica e atualiza√ß√µes de seguran√ßa.</p>
        <p style="color:#475569; font-size:10px; margin-top:30px; font-family:'JetBrains Mono',monospace;">Aguarde novas diretrizes operacionais.</p>
    </div>
    <div id="sigo-popup-container"
        style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:99999; display:flex; justify-content:center; align-items:center;">
    </div>
    <div id="alerta-procurado-global" class="hidden"
        style="position:fixed; top:0; left:0; width:100%; background:#b91c1c; color:#fff; text-align:center; padding:15px; font-family:'JetBrains Mono', monospace; font-weight:900; letter-spacing:2px; z-index:9999; box-shadow:0 5px 25px rgba(185,28,28,0.8); animation:piscarAlerta 1s infinite;">
        [!!!] ATEN√á√ÉO: O INDIV√çDUO CONSULTADO POSSUI MANDADO DE PRIS√ÉO ATIVO [!!!]</div>
    <style>
        @keyframes piscarAlerta {
            0% {
                background: #b91c1c;
            }

            50% {
                background: #7f1d1d;
            }

            100% {
                background: #b91c1c;
            }
        }

        @keyframes pulseQRR {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7);
            }

            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(220, 38, 38, 0);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
            }
        }
    </style>
    <div id="autosave-indicator" class="autosave-indicator font-mono hidden">[SYS] RASCUNHO SALVO NO CACHE LOCAL</div>
    <div class="dashboard-layout" id="main-container">
        <aside class="sidebar">
            <div class="sidebar-header"><img id="logo-sidebar"
                    src="https://cdn-icons-png.flaticon.com/512/2566/2566144.png"
                    style="width:40px; margin-bottom:10px;">
                <h1 class="titulo-sigo-pequeno" id="titulo-sidebar">S.I.G.O.</h1>
                <p class="subtitulo-sidebar">Terminal Operacional</p>
            </div>
            <nav class="sidebar-menu">
                <p class="menu-label">M√ìDULO DE OCORR√äNCIA</p><button class="menu-btn ativo font-mono"
                    id="btn-aba-novo-aph" onclick="mudarAba('aba-novo-aph')">[ BOLETIM / APH ]</button><button
                    class="menu-btn font-mono" id="btn-aba-historico" onclick="mudarAba('aba-historico')">[ ARQUIVO
                    LOCAL ]</button>
                <p class="menu-label mt-15 module-mandados">M√ìDULO T√ÅTICO & INVESTIGATIVO</p><button
                    class="menu-btn font-mono" id="btn-aba-uso-forca" onclick="mudarAba('aba-uso-forca')">[ RELAT√ìRIO
                    RUF ]</button><button class="menu-btn font-mono module-mandados" id="btn-aba-mandados"
                    onclick="mudarAba('aba-mandados')" style="color:#fca5a5;">[ MANDADOS DE PRIS√ÉO ]</button>
                <p class="menu-label mt-15 module-detran" style="color:var(--detran-green);">SISTEMA NACIONAL DE
                    TR√ÇNSITO</p><button class="menu-btn font-mono module-detran" id="btn-aba-detran"
                    onclick="mudarAba('aba-detran')">[ CONSULTA / S.N.T. ]</button>
                <p class="menu-label mt-15 module-gov" style="color:var(--gov-light);">SISTEMAS FEDERAIS / GOV</p>
                <button class="menu-btn font-mono module-delegacia" id="btn-aba-delegacia-policia"
                    onclick="mudarAba('aba-delegacia-policia')" style="color:#38bdf8;">[ DELEGACIA ELETR√îNICA
                    ]</button><button class="menu-btn font-mono module-licencas" id="btn-aba-licencas"
                    onclick="mudarAba('aba-licencas')">[ DOCUMENTA√á√ÉO / CRAF ]</button>
            </nav>
        </aside>
        <main class="main-content">
            <header class="topbar">
                <div class="topbar-esq"><span class="badge font-mono" id="topbar-badge">CBMESP</span>
                    <h2 class="nome-oficial-topbar" id="topbar-nome">CARREGANDO...</h2>
                </div>
                <div class="topbar-dir" style="display:flex; gap:10px; align-items:center;"><button
                        class="badge font-mono"
                        style="cursor:pointer; padding:10px 18px; border:none; font-size:10px; background:#dc2626; color:#fff; font-weight:900; letter-spacing:2px; animation:pulseQRR 2s infinite;"
                        onclick="acionarQRR()">[ BOT√ÉO DE P√ÇNICO / QRR ]</button><button
                        class="badge badge-pm qap font-mono"
                        style="cursor:pointer; padding:10px 18px; border:none; font-size:10px;" id="btn-status-servico"
                        onclick="trocarStatus()">[ QAP ] EM SERVI√áO</button><button class="btn-sair font-mono"
                        onclick="deslogarSistema()">[ DESCONECTAR ]</button></div>
            </header>

            <div class="area-trabalho" id="aba-novo-aph">
                <div class="cabecalho-documento">
                    <h3 style="color:var(--pm-light);">BOLETIM DE OCORR√äNCIA (BO/APH)</h3>
                    <p>Os Boletins Oficiais gerar√£o um Arquivo de Relat√≥rio (.txt) anexado automaticamente.</p>
                </div>
                <div class="form-painel">

                    <div style="margin-bottom:30px;">
                        <h4
                            style="color:var(--pm-blue);font-family:'JetBrains Mono',monospace;font-size:12px;margin-bottom:15px;border-bottom:1px solid #1e293b;padding-bottom:5px;">
                            1. DADOS DA VTR E GUARNI√á√ÉO</h4>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:15px;">
                            <div><label style="color:#64748b;font-size:10px;display:block;margin-bottom:5px;">OFICIAL
                                    REDATOR (AUTO)</label><input type="text" id="aph-socorrista-nome" readonly
                                    style="background:#05070a !important;color:#475569 !important;border:1px dashed #1e293b !important;cursor:not-allowed;width:100%;">
                            </div>
                            <div><label style="color:#64748b;font-size:10px;display:block;margin-bottom:5px;">ID
                                    REDATOR</label><input type="text" id="aph-socorrista-pass" readonly
                                    style="background:#05070a !important;color:#475569 !important;border:1px dashed #1e293b !important;cursor:not-allowed;width:100%;">
                            </div>
                        </div>
                        <div style="display:grid;grid-template-columns:1fr 2fr;gap:20px;">
                            <div><label style="color:#64748b;font-size:10px;display:block;margin-bottom:5px;">PREFIXO DA
                                    VIATURA (VALIDADA)</label><select id="aph-viatura" style="width:100%;">
                                    <option value="">Selecione a VTR Operante...</option>
                                    <option value="VTR-TA-01">T√ÅTICO 01 (SUV)</option>
                                    <option value="VTR-TA-02">T√ÅTICO 02 (SUV)</option>
                                    <option value="VTR-RP-10">R√ÅDIO PATRULHA 10</option>
                                    <option value="VTR-RP-11">R√ÅDIO PATRULHA 11</option>
                                    <option value="VTR-ROCAM-01">ROCAM 01 (MOTO)</option>
                                    <option value="VTR-AGUIA">√ÅGUIA (A√âREO)</option>
                                </select></div>
                            <div><label style="color:#64748b;font-size:10px;display:block;margin-bottom:5px;">√ÅREA DE
                                    PATRULHAMENTO</label><select id="aph-area" style="width:100%;">
                                    <option value="Norte">Regi√£o Norte</option>
                                    <option value="Sul">Regi√£o Sul</option>
                                    <option value="Leste">Regi√£o Leste</option>
                                    <option value="Oeste">Regi√£o Oeste</option>
                                    <option value="Centro">Centro / Pra√ßa</option>
                                </select></div>
                        </div>
                        <div
                            style="margin-top:20px;background:#05070a;border:1px solid #1e293b;border-radius:4px;padding:20px;position:relative;overflow:hidden;">
                            <p
                                style="text-align:center;color:#94a3b8;font-size:10px;letter-spacing:2px;margin-bottom:15px;font-family:'JetBrains Mono',monospace;">
                                [ MAPA T√ÅTICO DE ASSENTOS ]</p>
                            <div
                                style="width:280px;height:160px;border:2px solid #334155;border-radius:20px 20px 10px 10px;margin:0 auto;position:relative;background:linear-gradient(180deg,#0f172a 0%,#080b12 100%);">
                                <div
                                    style="position:absolute;top:-10px;left:50%;transform:translateX(-50%);width:80px;height:15px;background:linear-gradient(90deg,#ef4444 40%,#1e293b 50%,#3b82f6 60%);border-radius:3px;box-shadow:0 0 15px rgba(239,68,68,0.4),0 0 15px rgba(59,130,246,0.4);">
                                </div>
                                <div style="position:absolute;top:20px;left:15px;width:110px;"><label
                                        style="color:#38bdf8;font-size:9px;font-weight:800;display:block;margin-bottom:3px;">[
                                        P1 - MOTORISTA ]</label><input type="text" id="vtr-p1" placeholder="Nome / ID"
                                        style="width:100%;padding:5px !important;font-size:10px !important;"></div>
                                <div style="position:absolute;top:20px;right:15px;width:110px;"><label
                                        style="color:#facc15;font-size:9px;font-weight:800;display:block;margin-bottom:3px;">[
                                        P2 - COMANDANTE ]</label><input type="text" id="vtr-p2" placeholder="Nome / ID"
                                        style="width:100%;padding:5px !important;font-size:10px !important;"></div>
                                <div style="position:absolute;bottom:20px;left:15px;width:110px;"><label
                                        style="color:#cbd5e1;font-size:9px;font-weight:800;display:block;margin-bottom:3px;">[
                                        P3 - APOIO ESQ. ]</label><input type="text" id="vtr-p3" placeholder="Nome / ID"
                                        style="width:100%;padding:5px !important;font-size:10px !important;"></div>
                                <div style="position:absolute;bottom:20px;right:15px;width:110px;"><label
                                        style="color:#cbd5e1;font-size:9px;font-weight:800;display:block;margin-bottom:3px;">[
                                        P4 - APOIO DIR. ]</label><input type="text" id="vtr-p4" placeholder="Nome / ID"
                                        style="width:100%;padding:5px !important;font-size:10px !important;"></div>
                            </div>
                        </div>
                    </div>
                    <h4 class="form-section-title mt-25">2. IDENTIFICA√á√ÉO DO ENVOLVIDO</h4>
                    <div class="form-grid">
                        <div class="input-group"><label>Nome Completo</label><input type="text" id="aph-vitima-nome"
                                placeholder="'N√ÉO IDENTIFICADO'" required></div>
                        <div class="input-group"><label>Passaporte (RG)</label><input type="text" id="aph-vitima-pass"
                                maxlength="4" oninput="this.value=this.value.replace(/[^0-9]/g,'')"
                                onblur="verificarMandadoPrisaoPainel(this.value)"></div>
                    </div>

                    <h4 class="form-section-title mt-25">3. NARRATIVA</h4>
                    <div class="input-group"><label>Local Exato</label><input type="text" id="aph-local"
                            placeholder="Av. Alta / Pra√ßa Central" required></div>
                    <div class="input-group"><label>Relato Operacional B√°sico</label><textarea id="aph-relato"
                            class="caixa-texto-media" placeholder="Descreva os fatos..."></textarea></div>
                    <div class="input-group"><label>Desfecho / Provid√™ncia</label><textarea id="aph-desfecho"
                            class="caixa-texto-pequena" placeholder="Encaminhado ao DP, Preso, Liberado..."></textarea>
                    </div><button type="button" class="btn-ia mt-15 font-mono" id="btn-ia-aph"
                        onclick="refinarRelatoIA('aph')">[ REFINAR RELATO (IA) ]</button>

                    <div class="linha-divisoria"></div><button type="button" class="btn-entrar btn-azul font-mono"
                        id="btn-transmitir" onclick="assinarEnviarBOCB()">[ ASSINAR E ENVIAR ARQUIVO AO DISCORD
                        ]</button>
                </div>
            </div>

            <div class="area-trabalho hidden" id="aba-historico">
                <div class="cabecalho-documento">
                    <h3 style="color:var(--pm-light);">ARQUIVO PESSOAL DE BOLETINS</h3>
                </div>
                <div class="caixa-busca-historico"><input type="text" id="busca-boletim" class="input-busca font-mono"
                        placeholder="[ PESQUISAR ] Protocolo, envolvido, QTH..." onkeyup="filtrarBoletins()"></div>
                <div id="lista-meus-boletins"></div>
            </div>

            <div class="area-trabalho hidden" id="aba-uso-forca">
                <div class="cabecalho-documento">
                    <h3 style="color:var(--bombeiro-red);">RELAT√ìRIO DE USO DA FOR√áA (RUF)</h3>
                    <p>Disparo de arma de fogo ou conten√ß√£o severa.</p>
                </div>
                <div class="form-painel"
                    style="border-top:4px solid var(--bombeiro-red); background:rgba(127,29,29,0.05);">
                    <div class="form-grid">
                        <div class="input-group"><label>Prefixo da Viatura</label><input type="text" id="ruf-viatura"
                                placeholder="VTR-T√ÅTICO" required></div>
                        <div class="input-group"><label>Localiza√ß√£o</label><input type="text" id="ruf-local" required>
                        </div>
                    </div>
                    <div class="form-grid">
                        <div class="input-group"><label>Grau da For√ßa</label><select id="ruf-nivel">
                                <option value="NIVEL 1">Conten√ß√£o F√≠sica</option>
                                <option value="NIVEL 2">Menos Letal (Taser/G√°s)</option>
                                <option value="NIVEL 3">For√ßa Letal (Arma de Fogo)</option>
                            </select></div>
                        <div class="input-group"><label>Total de Disparos</label><input type="number" id="ruf-disparos"
                                placeholder="0"></div>
                    </div>
                    <div class="input-group mt-15"><label>Arma / Equipamento</label><input type="text" id="ruf-arma"
                            placeholder="Pistola 9mm..." required></div>
                    <div class="input-group mt-15"><label>Caracter√≠sticas do Alvo</label><textarea
                            id="ruf-caracteristicas" class="caixa-texto-pequena"
                            placeholder="Homem, camisa vermelha. Passaporte: 1234..." required></textarea></div>
                    <div class="form-grid mt-15">
                        <div class="input-group"><label>Les√µes?</label><select id="ruf-lesoes">
                                <option value="NENHUMA LES√ÉO">Nenhuma</option>
                                <option value="NO OPOSITOR">No opositor</option>
                                <option value="NA GUARNI√á√ÉO">Na guarni√ß√£o</option>
                            </select></div>
                        <div class="input-group"><label>Socorro prestado?</label><select id="ruf-socorro">
                                <option value="SIM">Sim</option>
                                <option value="N√ÉO">N√£o</option>
                                <option value="√ìBITO LOCAL">√ìbito</option>
                            </select></div>
                    </div>
                    <div class="input-group mt-15"><label>Din√¢mica</label><textarea id="ruf-relato"
                            class="caixa-texto-media" required></textarea></div><button type="button"
                        class="btn-ia mt-15 font-mono" id="btn-ia-ruf"
                        style="background:linear-gradient(90deg,var(--bombeiro-dark) 0%,var(--bombeiro-red) 100%); border-color:var(--bombeiro-red);"
                        onclick="refinarRelatoIA('ruf')">[ GERAR LAUDO (IA) ]</button>
                    <div class="linha-divisoria" style="background:rgba(239,68,68,0.2);"></div><button type="button"
                        class="btn-entrar btn-vermelho font-mono" id="btn-transmitir-ruf" onclick="assinarEnviarRUF()">[
                        REGISTRAR E ENVIAR ARQUIVO AO DISCORD ]</button>
                </div>
            </div>

            <div class="area-trabalho hidden module-mandados" id="aba-mandados">
                <div class="cabecalho-documento" style="border-bottom-color:#ef4444;">
                    <h3 style="color:#fca5a5;">SISTEMA DE MANDADOS DE PRIS√ÉO E BUSCA</h3>
                </div>
                <div class="form-grid">
                    <div class="form-painel" style="border-color:#ef4444; background:rgba(239,68,68,0.05);"
                        id="painel-emitir-mandado">
                        <h4 class="form-section-title" style="color:#fca5a5;">EXPEDIR MANDADO DE PRIS√ÉO</h4>
                        <div class="input-group"><label>Passaporte do Alvo (ID)</label><input type="text"
                                id="mandado-passaporte" maxlength="4"
                                oninput="this.value=this.value.replace(/[^0-9]/g,'')"></div>
                        <div class="input-group mt-15"><label>Motiva√ß√£o Criminal (Artigos / Crimes)</label><textarea
                                id="mandado-motivo" class="caixa-texto-pequena"></textarea></div>
                        <div class="input-group mt-15"><label>N√≠vel de Periculosidade</label><select id="mandado-perigo"
                                style="border-color:#ef4444;">
                                <option value="BAIXO">BAIXO Risco</option>
                                <option value="ALTO">ALTO Risco (Armado)</option>
                            </select></div><button class="btn-entrar btn-vermelho font-mono mt-15"
                            onclick="expedirMandadoPrisao()">[ INSERIR NA LISTA ]</button>
                    </div>
                    <div>
                        <h4 class="form-section-title" style="color:#fca5a5; margin-bottom:15px;">PROCURADOS ATIVOS NO
                            ESTADO</h4>
                        <div id="lista-procurados-ativos"></div>
                    </div>
                </div>
            </div>

            <div class="area-trabalho hidden module-detran" id="aba-detran">
                <div class="cabecalho-documento" style="border-bottom-color:var(--detran-green);">
                    <h3 style="color:var(--detran-green);">SISTEMA NACIONAL DE TR√ÇNSITO (DETRAN)</h3>
                </div>
                <div class="filtros-efetivo" style="margin-bottom:30px;"><button class="btn-filtro ativo font-mono"
                        id="btn-sub-consulta" onclick="mudarSubAbaDetran('consulta')">[ FISCALIZAR VE√çCULO
                        ]</button><button class="btn-filtro font-mono" id="btn-sub-registro"
                        onclick="mudarSubAbaDetran('registro')">[ REGISTRAR VE√çCULO ]</button><button
                        class="btn-filtro font-mono" id="btn-sub-pagamentos" onclick="mudarSubAbaDetran('pagamentos')"
                        style="color:var(--warning-yellow); border-color:var(--warning-yellow);">[ GERENCIAR PAGAMENTOS
                        ]</button></div>
                <div id="sub-detran-consulta">
                    <div class="input-group" style="max-width:600px;"><input type="text" id="busca-placa-detran"
                            class="input-busca font-mono" style="border-color:var(--detran-green); margin-bottom:10px;"
                            placeholder="[ SINESP ] Digite a PLACA..."><button class="btn-entrar font-mono"
                            style="background:var(--detran-green); color:#fff; border:none;"
                            onclick="consultarPlacaPolicial()">[ PUXAR DADOS DO VE√çCULO ]</button></div>
                    <div id="resultado-placa-policia" class="hidden mt-25">
                        <div class="form-painel" style="border-top:4px solid var(--detran-green);">
                            <div
                                style="display:flex; gap:30px; align-items:center; margin-bottom:25px; border-bottom:1px solid #1e293b; padding-bottom:20px;">
                                <div class="placa-veiculo">
                                    <div class="placa-header"><span>BRASIL</span></div>
                                    <div class="placa-numero" id="res-placa">ABC1D23</div>
                                </div>
                                <div>
                                    <p class="label-pequena">PROPRIET√ÅRIO LEGAL</p>
                                    <h4 class="nome-destaque" id="res-proprietario">NOME</h4>
                                    <p class="font-mono mt-5" style="font-size:11px; color:#94a3b8;" id="res-modelo">
                                        Modelo/Cor</p>
                                    <div id="res-status-badge"></div>
                                </div>
                            </div>
                            <h4 class="form-section-title" style="color:var(--pm-light);">LAVRAR AUTO DE INFRA√á√ÉO</h4>
                            <div class="form-grid">
                                <div class="input-group"><label>Tipifica√ß√£o / Motivo</label><input type="text"
                                        id="autuacao-motivo"></div>
                                <div class="input-group"><label>Valor (R$)</label><input type="number"
                                        id="autuacao-valor" min="0"></div>
                            </div>
                            <div class="input-group mt-15"><label style="color:var(--warning-yellow);">Apreens√£o
                                    Administrativa?</label><select id="autuacao-apreensao">
                                    <option value="NAO">N√ÉO</option>
                                    <option value="SIM">SIM - P√°tio</option>
                                </select></div><button class="btn-entrar btn-vermelho font-mono mt-15"
                                onclick="aplicarAutuacaoVeiculo()">[ CONFIRMAR AUTO DE INFRA√á√ÉO ]</button><button
                                class="btn-neutro font-mono mt-15"
                                style="width:100%; border-color:var(--success-green); color:var(--success-green);"
                                onclick="liberarVeiculoPatio()" id="btn-liberar-patio">[ LIBERAR VE√çCULO DO P√ÅTIO
                                ]</button>
                        </div>
                    </div>
                </div>
                <div id="sub-detran-registro" class="hidden">
                    <div class="form-painel" style="max-width:600px;">
                        <h4 class="form-section-title" style="color:var(--detran-green);">VINCULAR NOVO VE√çCULO</h4>
                        <div class="form-grid">
                            <div class="input-group"><label>Passaporte Propriet√°rio</label><input type="text"
                                    id="reg-veiculo-passaporte"></div>
                            <div class="input-group"><label>Placa</label><input type="text" id="reg-veiculo-placa"
                                    maxlength="7"></div>
                        </div>
                        <div class="form-grid">
                            <div class="input-group"><label>Modelo</label><input type="text" id="reg-veiculo-modelo">
                            </div>
                            <div class="input-group"><label>Cor</label><input type="text" id="reg-veiculo-cor"></div>
                        </div><button class="btn-entrar font-mono mt-15"
                            style="background:var(--detran-green); color:#fff; border:none;"
                            onclick="registrarVeiculoBanco()">[ PROCESSAR REGISTRO ]</button>
                    </div>
                </div>
                <div id="sub-detran-pagamentos" class="hidden">
                    <div class="form-painel"
                        style="max-width:800px; border-color:var(--warning-yellow); background:rgba(217,119,6,0.05);">
                        <h4 class="form-section-title" style="color:var(--warning-yellow);">PAGAMENTO DE MULTAS</h4>
                        <div id="lista-multas-analise"></div>
                    </div>
                </div>
            </div>

            <div class="area-trabalho hidden module-delegacia" id="aba-delegacia-policia">
                <div class="cabecalho-documento" style="border-bottom-color:#38bdf8;">
                    <h3 style="color:#38bdf8;">CENTRAL DA DELEGACIA ELETR√îNICA</h3>
                </div>
                <div id="lista-bos-civis-analise"></div>
            </div>

            <div class="area-trabalho hidden module-licencas" id="aba-licencas">
                <div class="cabecalho-documento" style="border-bottom-color:var(--gov-light);">
                    <h3 style="color:var(--gov-light);">DEPARTAMENTO DE EMISS√ÉO DE LICEN√áAS E C.R.A.F.</h3>
                </div>
                <div class="form-grid">
                    <div class="form-painel" style="border-color:#38bdf8; background:rgba(56,189,248,0.05);"
                        id="painel-emitir-licenca">
                        <h4 class="form-section-title" style="color:#38bdf8;">EMITIR NOVA LICEN√áA / CRAF</h4>
                        <div class="input-group"><label>Passaporte (ID)</label><input type="text"
                                id="licenca-passaporte" maxlength="4"></div>
                        <div class="input-group mt-15"><label>Tipo de Documento</label><select id="licenca-tipo"
                                style="border-color:rgba(56,189,248,0.4);"
                                onchange="document.getElementById('campos-arma-extra').style.display=this.value.includes('PORTE')?'grid':'none';">
                                <option value="PORTE DE ARMA (PF)">Porte de Arma de Fogo</option>
                                <option value="PORTE DE CA√áA">Licen√ßa de Ca√ßa</option>
                                <option value="ALVAR√Å COMERCIAL">Alvar√° Comercial</option>
                            </select></div>
                        <div id="campos-arma-extra" class="form-grid mt-15" style="display:grid;">
                            <div class="input-group" style="margin-bottom:0;"><label>Armamento</label><input type="text"
                                    id="licenca-arma" style="border-color:#38bdf8;"></div>
                            <div class="input-group" style="margin-bottom:0;"><label>Limite de Muni√ß√£o</label><input
                                    type="number" id="licenca-municao" style="border-color:#38bdf8;" min="0"></div>
                        </div>
                        <div class="input-group mt-15"><label>Validade</label><input type="date" id="licenca-validade"
                                style="border-color:rgba(56,189,248,0.4);"></div>
                        <div class="input-group mt-15"><label>Laudo</label><textarea id="licenca-obs"
                                class="caixa-texto-pequena"></textarea></div><button class="btn-entrar font-mono mt-15"
                            style="background:var(--gov-light); color:#000; border:none;"
                            onclick="emitirLicencaCivil()">[ AUTENTICAR DOCUMENTO ]</button>
                    </div>
                    <div class="form-painel" style="border-color:#334155;" id="painel-buscar-licenca">
                        <h4 class="form-section-title" style="color:#f8fafc;">CIVIS LICENCIADOS</h4><input type="text"
                            id="busca-licencas" class="input-busca font-mono"
                            style="padding:10px; font-size:10px; margin-bottom:15px;" placeholder="Pesquisar ID..."
                            onkeyup="renderizarLicencasPainel()">
                        <div id="lista-licencas-ativas" style="max-height:480px; overflow-y:auto;"></div>
                    </div>
                </div>
            </div>

        </main>
    </div>
    <div id="modal-boletim" class="hidden"
        style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:9999;display:flex;justify-content:center;align-items:center;">
        <div
            style="background:#0f172a;width:90%;max-width:700px;border-radius:4px;border:2px solid var(--pm-blue);display:flex;flex-direction:column;max-height:90vh;">
            <div
                style="background:var(--pm-blue);padding:15px;display:flex;justify-content:space-between;align-items:center;color:#000;">
                <h3 style="font-family:'JetBrains Mono',monospace;font-size:14px;font-weight:800;">[ AUTOS ELETR√îNICOS ]
                    - <span id="modal-protocolo"></span></h3><button
                    onclick="document.getElementById('modal-boletim').classList.add('hidden')"
                    style="background:transparent;border:none;color:#000;font-size:16px;cursor:pointer;font-weight:900;">X</button>
            </div>
            <div id="conteudo-modal-dinamico" style="padding:20px;overflow-y:auto;flex:1;background:#f1f5f9;"></div>
            <div class="modal-footer" id="footer-botoes-bo"
                style="display:flex;justify-content:space-between;flex-wrap:wrap;gap:10px;padding:15px;background:#080b12;border-top:1px solid #1e293b;">
                <div style="display:flex;gap:10px;"><button class="btn-neutro font-mono"
                        style="color:var(--warning-yellow);padding:10px;background:transparent;border:1px solid var(--warning-yellow);cursor:pointer;border-radius:3px;"
                        onclick="solicitarAlteracao('EDICAO')">[ SOLICITAR EDI√á√ÉO ]</button><button
                        class="btn-perigo font-mono"
                        style="padding:10px;background:#7f1d1d;color:#fff;border:none;cursor:pointer;border-radius:3px;"
                        onclick="solicitarAlteracao('ARQUIVAMENTO')">[ SOLICITAR EXCLUS√ÉO / ARQUIVAR ]</button></div>
                <button class="btn-entrar font-mono"
                    style="background:#0284c7;color:#fff;border:none;padding:10px;cursor:pointer;font-weight:bold;border-radius:3px;box-shadow:0 4px 15px rgba(2,132,199,0.4);"
                    onclick="prepararEnvioDiscordDoModal()">[ üñ®Ô∏è IMPRIMIR E ENVIAR AO DISCORD ]</button>
            </div>
        </div>
    </div>
    <script src="js/app.js"></script>
   <script src="sigo-qa.js"></script>

   <style>
    /* 1. CURSOR HUD E FUNDO AURORA ANIMADO */
    * { cursor: crosshair !important; } /* Mira T√°tica */
    
    body, html {
        background-color: #030712 !important;
        color: #e2e8f0 !important;
        overflow-x: hidden;
    }

    /* Aurora Breathing - Luzes vivas no fundo */
    body::after {
        content: "";
        position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
        background: radial-gradient(circle at 50% 50%, rgba(14, 165, 233, 0.15), transparent 40%),
                    radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.1), transparent 30%);
        animation: auroraPulse 15s ease-in-out infinite alternate;
        z-index: -1; pointer-events: none;
    }
    @keyframes auroraPulse {
        0% { transform: scale(1) translate(0, 0); }
        100% { transform: scale(1.1) translate(-2%, 5%); }
    }

    /* 2. EFEITO GLITCH NOS T√çTULOS (CYBERPUNK) */
    h1, h2, h3, .card-titulo {
        position: relative;
        text-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
    }
    h2:hover {
        animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
    }
    @keyframes glitch {
        0% { transform: translate(0) }
        20% { transform: translate(-2px, 1px) }
        40% { transform: translate(-1px, -1px) }
        60% { transform: translate(2px, 1px) }
        80% { transform: translate(1px, -1px) }
        100% { transform: translate(0) }
    }

    /* 3. GLASSMORPHISM HOLOGR√ÅFICO (Borda Iluminada) */
    [id^="modal-"] > div, .card-solicitacao, .botoes-modal {
        background: rgba(15, 23, 42, 0.4) !important;
        backdrop-filter: blur(24px) saturate(200%) !important;
        -webkit-backdrop-filter: blur(24px) saturate(200%) !important;
        border: 1px solid rgba(255, 255, 255, 0.05) !important;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6), inset 0 1px 1px rgba(255, 255, 255, 0.1) !important;
        position: relative;
    }
    
    /* Linha de Neon que corre por cima dos modais */
    [id^="modal-"] > div::before {
        content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
        background: linear-gradient(90deg, transparent, #38bdf8, transparent);
        opacity: 0.6;
    }

    /* 4. CARDS PREPARADOS PARA 3D */
    .card-boletim, .card-user, .card-multa, .card-veiculo {
        background: linear-gradient(145deg, rgba(30, 41, 59, 0.7) 0%, rgba(15, 23, 42, 0.9) 100%) !important;
        border: 1px solid rgba(56, 189, 248, 0.1) !important;
        border-left: 3px solid #0ea5e9 !important;
        border-radius: 12px !important;
        transform-style: preserve-3d; /* Permite o eixo Z */
        transform: perspective(1000px);
        transition: box-shadow 0.3s ease, border-color 0.3s ease;
    }
    
    /* Efeito de Profundidade interna no Card */
    .card-boletim *, .card-user * {
        transform: translateZ(20px); /* O texto "flutua" pra fora do card */
    }

    .card-boletim:hover, .card-user:hover {
        box-shadow: 0 20px 40px rgba(14, 165, 233, 0.2), 0 0 15px rgba(14, 165, 233, 0.2) inset !important;
        border-color: rgba(56, 189, 248, 0.4) !important;
        border-left-width: 6px !important;
    }

    /* 5. CAIXAS DE TEXTO (NEON GLOW) */
    input, select, textarea {
        background: rgba(2, 6, 23, 0.5) !important;
        border: 1px solid rgba(71, 85, 105, 0.5) !important;
        color: #7dd3fc !important;
        backdrop-filter: blur(10px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }
    input:focus, textarea:focus {
        border-color: #0ea5e9 !important;
        box-shadow: 0 0 20px rgba(14, 165, 233, 0.3), inset 0 0 10px rgba(14, 165, 233, 0.1) !important;
        transform: translateY(-2px);
    }

    /* 6. BOT√ïES PREPARADOS PARA MAGNETISMO */
    button {
        position: relative;
        overflow: hidden;
        border-radius: 6px !important;
        transition: background 0.3s, color 0.3s, box-shadow 0.3s !important;
        /* A transi√ß√£o do transform ser√° controlada pelo JS magn√©tico */
    }
    .btn-entrar {
        background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%) !important;
        box-shadow: 0 4px 15px rgba(2, 132, 199, 0.4), inset 0 1px 1px rgba(255,255,255,0.2) !important;
        border: 1px solid #0ea5e9 !important;
    }
    .btn-entrar:hover {
        box-shadow: 0 8px 25px rgba(14, 165, 233, 0.6) !important;
        text-shadow: 0 0 8px rgba(255,255,255,0.8);
    }
</style>

<script>
    // =====================================================================
    // MOTOR DE F√çSICA (TILT 3D E BOT√ïES MAGN√âTICOS)
    // =====================================================================
    function aplicarFisicaQuantica() {
        // 1. CARDS COM 3D TILT (Rastreamento de Mouse)
        const cards = document.querySelectorAll('.card-boletim, .card-user, .card-multa, .card-veiculo');
        cards.forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left; // Posi√ß√£o X dentro do card
                const y = e.clientY - rect.top;  // Posi√ß√£o Y dentro do card
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                // Calcula a angula√ß√£o baseada em qu√£o longe o mouse est√° do centro
                const rotateX = ((y - centerY) / centerY) * -10; // Max 10 graus
                const rotateY = ((x - centerX) / centerX) * 10;
                
                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
                card.style.transition = 'none'; // Tira a transi√ß√£o para seguir o mouse r√°pido
            });

            card.addEventListener('mouseleave', () => {
                // Reseta o card suavemente quando o mouse sai
                card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`;
                card.style.transition = 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)';
            });
        });

        // 2. BOT√ïES MAGN√âTICOS (O bot√£o tenta "grudar" no cursor)
        const botoes = document.querySelectorAll('button');
        botoes.forEach(btn => {
            btn.addEventListener('mousemove', (e) => {
                const rect = btn.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                
                // Move o bot√£o at√© 15px na dire√ß√£o do mouse
                btn.style.transform = `translate(${x * 0.3}px, ${y * 0.3}px)`;
                btn.style.transition = 'none';
            });

            btn.addEventListener('mouseleave', () => {
                // Volta pro lugar original
                btn.style.transform = `translate(0px, 0px)`;
                btn.style.transition = 'transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
            });
        });
    }

    // Como os cards s√£o gerados dinamicamente pelo S.I.G.O., 
    // precisamos aplicar a f√≠sica a cada 2 segundos para pegar cards novos.
    setInterval(aplicarFisicaQuantica, 2000);
    aplicarFisicaQuantica();
</script>
</body>

</html>